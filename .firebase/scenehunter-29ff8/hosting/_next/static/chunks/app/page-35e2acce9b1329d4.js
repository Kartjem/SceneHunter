(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1185:(e,r,t)=>{"use strict";t.d(r,{ThemeToggle:()=>n});var a=t(7536),s=t(2115),o=t(8371);function n(){let{theme:e,setTheme:r}=(0,o.D)(),[t,n]=s.useState(!1);if(s.useEffect(()=>{n(!0)},[]),!t)return(0,a.jsx)("div",{className:"h-10 w-10 rounded-full bg-neutral-200 dark:bg-neutral-800 animate-pulse"});let i="dark"===e;return(0,a.jsx)("button",{onClick:()=>r(i?"light":"dark"),className:"group relative h-10 w-10 rounded-full border border-neutral-300 dark:border-neutral-700 bg-white dark:bg-neutral-900 shadow-sm hover:shadow-md transition-all duration-300 ease-in-out hover:scale-105 focus:outline-none focus:ring-2 focus:ring-neutral-400 dark:focus:ring-neutral-600 focus:ring-offset-2 dark:focus:ring-offset-neutral-900","aria-label":"Switch to ".concat(i?"light":"dark"," mode"),children:(0,a.jsxs)("div",{className:"relative h-full w-full overflow-hidden rounded-full",children:[(0,a.jsx)("div",{className:"absolute inset-0 transition-all duration-500 ease-in-out ".concat(i?"bg-gradient-to-br from-neutral-800 to-neutral-900":"bg-gradient-to-br from-amber-50 to-orange-100")}),(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center transition-all duration-500 ease-in-out ".concat(i?"opacity-0 rotate-180 scale-0":"opacity-100 rotate-0 scale-100"),children:(0,a.jsx)("svg",{className:"h-[1.1rem] w-[1.1rem] text-amber-600",fill:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{d:"M12 2.25a.75.75 0 01.75.75v2.25a.75.75 0 01-1.5 0V3a.75.75 0 01.75-.75zM7.5 12a4.5 4.5 0 119 0 4.5 4.5 0 01-9 0zM18.894 6.166a.75.75 0 00-1.06-1.06l-1.591 1.59a.75.75 0 101.06 1.061l1.591-1.59zM21.75 12a.75.75 0 01-.75.75h-2.25a.75.75 0 010-1.5H21a.75.75 0 01.75.75zM17.834 18.894a.75.75 0 001.06-1.06l-1.59-1.591a.75.75 0 10-1.061 1.06l1.59 1.591zM12 18a.75.75 0 01.75.75V21a.75.75 0 01-1.5 0v-2.25A.75.75 0 0112 18zM7.758 17.303a.75.75 0 00-1.061-1.06l-1.591 1.59a.75.75 0 001.06 1.061l1.591-1.59zM6 12a.75.75 0 01-.75.75H3a.75.75 0 010-1.5h2.25A.75.75 0 016 12zM6.697 7.757a.75.75 0 001.06-1.06l-1.59-1.591a.75.75 0 00-1.061 1.06l1.59 1.591z"})})}),(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center transition-all duration-500 ease-in-out ".concat(i?"opacity-100 rotate-0 scale-100":"opacity-0 -rotate-180 scale-0"),children:(0,a.jsx)("svg",{className:"h-[1.1rem] w-[1.1rem] text-blue-400",fill:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M9.528 1.718a.75.75 0 01.162.819A8.97 8.97 0 009 6a9 9 0 009 9 8.97 8.97 0 003.463-.69.75.75 0 01.981.98 10.503 10.503 0 01-9.694 6.46c-5.799 0-10.5-4.701-10.5-10.5 0-4.368 2.667-8.112 6.46-9.694a.75.75 0 01.818.162z",clipRule:"evenodd"})})}),(0,a.jsx)("div",{className:"absolute inset-0 rounded-full bg-gradient-to-r from-transparent via-white/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]})})}},3862:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,6874,23)),Promise.resolve().then(t.bind(t,4187)),Promise.resolve().then(t.bind(t,4165)),Promise.resolve().then(t.bind(t,1185))},4165:(e,r,t)=>{"use strict";t.d(r,{Dialog:()=>l,DialogContent:()=>f,DialogHeader:()=>h,DialogTitle:()=>m,DialogTrigger:()=>c});var a=t(7536),s=t(2115),o=t(5452),n=t(4416),i=t(9434);let l=o.bL,c=o.l9,d=o.ZL;o.bm;let u=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(o.hJ,{ref:r,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s})});u.displayName=o.hJ.displayName;let f=s.forwardRef((e,r)=>{let{className:t,children:s,...l}=e;return(0,a.jsxs)(d,{children:[(0,a.jsx)(u,{}),(0,a.jsxs)(o.UC,{ref:r,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...l,children:[s,(0,a.jsxs)(o.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(n.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});f.displayName=o.UC.displayName;let h=e=>{let{className:r,...t}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",r),...t})};h.displayName="DialogHeader";let m=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(o.hE,{ref:r,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",t),...s})});m.displayName=o.hE.displayName,s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(o.VY,{ref:r,className:(0,i.cn)("text-sm text-muted-foreground",t),...s})}).displayName=o.VY.displayName},4187:(e,r,t)=>{"use strict";t.d(r,{AuthRedirect:()=>i});var a=t(7536),s=t(2115),o=t(7306),n=t(5695);function i(e){let{children:r}=e,{isAuthenticated:t,isLoading:i}=(0,o.t)(),l=(0,n.useRouter)();return((0,s.useEffect)(()=>{!i&&t&&l.push("/dashboard")},[t,i,l]),i)?(0,a.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Loading..."})]})}):t?null:(0,a.jsx)(a.Fragment,{children:r})}},5159:(e,r,t)=>{"use strict";t.d(r,{n:()=>o});var a=t(5453),s=t(6786);let o=(0,a.v)()((0,s.Zr)((e,r)=>({user:null,userProfile:null,isLoading:!0,isAuthenticated:!1,setUser:r=>e({user:r,isAuthenticated:!!r,isLoading:!1}),setUserProfile:r=>e({userProfile:r}),setLoading:r=>e({isLoading:r}),logout:()=>e({user:null,userProfile:null,isAuthenticated:!1,isLoading:!1}),updateProfile:t=>{let a=r().userProfile;a&&e({userProfile:{...a,...t}})}}),{name:"auth-store",partialize:e=>({userProfile:e.userProfile,isAuthenticated:e.isAuthenticated})}))},5881:(e,r,t)=>{"use strict";t.d(r,{A:()=>d,AuthProvider:()=>c});var a=t(7536),s=t(2115),o=t(3004),n=t(6104),i=t(5159);let l=(0,s.createContext)(void 0);function c(e){let{children:r}=e,{user:t,isLoading:c,isAuthenticated:d,setUser:u,setLoading:f}=(0,i.n)();return(0,s.useEffect)(()=>((async()=>{try{let e=await (0,o.Q4)(n.j2);(null==e?void 0:e.user)&&console.log("Google redirect sign-in successful:",e.user)}catch(e){console.error("Redirect result error:",e),e&&"object"==typeof e&&"code"in e&&console.warn("Firebase redirect error:",e.code,e.message)}})().catch(e=>{console.error("Unhandled redirect result error:",e)}),(0,o.hg)(n.j2,e=>{try{u(e),f(!1)}catch(e){console.error("Auth state change error:",e),f(!1)}})),[u,f]),(0,a.jsx)(l.Provider,{value:{user:t,isLoading:c,isAuthenticated:d},children:r})}function d(){let e=(0,s.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},6104:(e,r,t)=>{"use strict";t.d(r,{db:()=>d,j2:()=>c});var a=t(3915),s=t(3004),o=t(5317),n=t(858),i=t(9563);let l=(0,a.Wp)({apiKey:"AIzaSyBzYjserCFe5E7G4CX478rA3CuqVOML4f0",authDomain:"scenehunter-29ff8.firebaseapp.com",projectId:"scenehunter-29ff8",storageBucket:"scenehunter-29ff8.firebasestorage.app",messagingSenderId:"233532216462",appId:"1:233532216462:web:4639171ce802202e2865df"});try{let e="6Ldd_GErAAAAAMsQKR5eG2JJDVj-gbvOMCSViUSR";!e||e.startsWith("your-")?console.warn("Firebase App Check not initialized: Invalid or missing reCAPTCHA site key",{key:e?"".concat(e.slice(0,10),"..."):"undefined"}):((0,i.Ay)(l,{provider:new i.yG(e),isTokenAutoRefreshEnabled:!0}),console.log("Firebase App Check initialized successfully with reCAPTCHA Enterprise"))}catch(e){console.warn("Failed to initialize Firebase App Check (non-critical):",{message:null==e?void 0:e.message,code:null==e?void 0:e.code,details:e}),e&&"function"==typeof e.then&&e.catch(e=>{console.warn("Suppressed App Check promise rejection:",e)})}let c=(0,s.xI)(l),d=(0,o.aU)(l);(0,n.c7)(l)},7306:(e,r,t)=>{"use strict";t.d(r,{U:()=>u,t:()=>d});var a=t(5881),s=t(2960),o=t(6715),n=t(5041),i=t(5317),l=t(6104),c=t(5159);function d(){var e,r;let t=(0,a.A)(),d=(r=null==(e=t.user)?void 0:e.uid,(0,s.I)({queryKey:["userProfile",r],queryFn:async()=>{if(!r)throw Error("User ID required");try{let e=(0,i.H9)(l.db,"users",r),t=await (0,i.x7)(e);if(t.exists())return t.data();return null}catch(e){throw console.error("Error fetching user profile:",e),e}},enabled:!!r,staleTime:3e5,retry:(e,r)=>(!r||"object"!=typeof r||!("code"in r)||"permission-denied"!==r.code&&"unauthenticated"!==r.code)&&e<3})),u=function(){let e=(0,o.jE)(),{setUserProfile:r}=(0,c.n)();return(0,n.n)({mutationFn:async e=>{try{let r={...e,createdAt:(0,i.O5)(),lastLoginAt:(0,i.O5)(),preferences:{theme:"system",language:"en",notifications:!0,...e.preferences},roles:["user"]};return await (0,i.BN)((0,i.H9)(l.db,"users",e.uid),r),r}catch(e){throw console.error("User profile creation failed:",e),e}},onSuccess:t=>{try{e.setQueryData(["userProfile",t.uid],t),r(t)}catch(e){console.error("Error updating query cache or store:",e)}},onError:e=>{console.error("Create user profile mutation error:",e)}})}(),f=async e=>{try{return new Promise((r,t)=>{u.mutate(e,{onSuccess:()=>{r()},onError:e=>{console.error("Create user profile error:",e),t(e)}})})}catch(e){throw console.error("Error calling createUserProfile:",e),e}};return{...t,userProfile:d.data,isProfileLoading:d.isLoading,profileError:d.error,createUserProfile:f,isCreatingProfile:u.isPending}}function u(e){if(e.code&&(e.code.includes("appCheck")||e.code.includes("recaptcha")||"app-check-token-invalid"===e.code||"appCheck/recaptcha-error"===e.code))return console.warn("App Check error (non-critical):",e.code,e.message),"Security verification temporarily unavailable, but you can still continue";switch(e.code){case"auth/user-not-found":return"No account found with this email";case"auth/wrong-password":return"Incorrect password";case"auth/invalid-email":return"Invalid email address";case"auth/user-disabled":return"This account has been disabled";case"auth/email-already-in-use":return"Email is already registered";case"auth/popup-blocked":return"Popup was blocked by browser. Please allow popups for this site or try again.";case"auth/popup-closed-by-user":case"auth/cancelled-popup-request":return"Sign-in was cancelled";case"permission-denied":return"Access denied";case"not-found":return"Data not found";case"unauthenticated":return"Authentication required";default:if(e.message&&(e.message.includes("AppCheck")||e.message.includes("App Check")||e.message.includes("reCAPTCHA")))return console.warn("App Check related error:",e),"Security verification service temporarily unavailable";return e.message||"An error occurred"}}},8371:(e,r,t)=>{"use strict";t.d(r,{D:()=>i,ThemeProvider:()=>n});var a=t(7536),s=t(2115);let o=(0,s.createContext)({theme:"system",setTheme:()=>null});function n(e){let{children:r,defaultTheme:t="system",storageKey:n="scenehunter-ui-theme",...i}=e,[l,c]=(0,s.useState)(t),[d,u]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{var e;u(!0),c((null==(e=localStorage)?void 0:e.getItem(n))||t)},[t,n]),(0,s.useEffect)(()=>{if(!d)return;let e=window.document.documentElement;if(e.classList.remove("light","dark"),"system"===l){let r=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";e.classList.add(r);return}e.classList.add(l)},[l,d]),(0,a.jsx)(o.Provider,{...i,value:{theme:l,setTheme:e=>{var r;null==(r=localStorage)||r.setItem(n,e),c(e)}},children:r})}let i=()=>{let e=(0,s.useContext)(o);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}},9434:(e,r,t)=>{"use strict";t.d(r,{cn:()=>o});var a=t(2596),s=t(9688);function o(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,s.QP)((0,a.$)(r))}}},e=>{var r=r=>e(e.s=r);e.O(0,[992,73,821,277,736,350,233,956,441,127,358],()=>r(3862)),_N_E=e.O()}]);